import{C as e,D as t,E as n,S as r,T as i,a,c as o,d as s,f as c,g as l,i as u,l as d,n as f,o as p,r as ee,s as m,v as h,w as g,y as _}from"./index-kdEK8O4I.js";import{n as v,t as y}from"./LightRays-C8aiJH4T.js";import{t as te}from"./TargetCursor-Bo2f4a5T.js";var ne={class:`w-75 p-5 overflow-auto`},b=[`onClick`],x={class:`flex justify-between items-center`},S={class:`text-md opacity-80`},C={class:`flex-1 p-5 flex flex-col overflow-hidden`},w={class:`flex mb-5 gap-2.5`},T=[`max`],re=[`disabled`],E=[`disabled`],D={class:`flex-1 rounded-lg p-5 mb-5 relative`},O={class:`absolute top-5 left-1/2 -translate-x-1/2 w-[60vw] z-10 bg-[#0b0b0bbf] rounded-lg p-4 backdrop-blur-sm`},k={key:0,class:`absolute w-full h-full z-1 left-0 top-0 pointer-events-none`},A={class:`flex justify-between items-center mb-3 py-4 border-b border-(--item-border-color)`},j={class:`text-2xl font-bold text-white`},M={class:`flex flex-wrap justify-center items-center gap-7.5 h-[50vh] overflow-auto`},N=[`src`],P={class:`text-lg font-bold text-(--item-text-color) text-center max-w-15 overflow-hidden whitespace-nowrap text-ellipsis`},F=[`src`,`alt`],I={class:`w-75 p-5 flex flex-col relative`},L={class:`text-2xl font-bold mb-5 text-right text-transparent bg-clip-text bg-(image:--title-color)`},R={class:`flex-1 overflow-y-auto flex flex-col gap-4`},z=[`src`,`alt`],B={class:`text-lg font-bold text-white`},V=f(c({__name:`LotteryView`,setup(c){let f=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,0,1,0,1,0,1,0,0,0,1,0,1,0,0],[1,1,1,0,1,0,1,0,1,1,1,0,1,1,1],[1,0,0,0,1,0,1,0,1,0,0,0,1,0,1],[1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],V=g([]),H=g([]),{currentPrize:U,drawCount:W,drawCountMax:G,isDrawing:K,unwonPersons:q,winnerList:J,currentWinnerList:Y,startDrawing:X,stopDrawing:ie,resetWinnerList:Z,loadWinnerList:ae}=v({storeName:`lotteryStore`,personList:H,prizeList:V});l(()=>{ae();let e=new URL(`data:application/json;base64,Ww0KICAgIHsgImlkIjogMSwgInR5cGUiOiAi5LiA562J5aWWIiwgIm5hbWUiOiAiSVBPV0VURiIsICJtYXhDb3VudCI6IDEsICJhbGxvd1RhZ3MiOiBbXSwgInByZWRldGVybWluZWQiOiBbXSB9LA0KICAgIHsgImlkIjogMiwgInR5cGUiOiAi5LqM562J5aWWIiwgIm5hbWUiOiAi55S156OB54KJIiwgIm1heENvdW50IjogNSwgImFsbG93VGFncyI6IFtdLCAicHJlZGV0ZXJtaW5lZCI6IFtdIH0sDQogICAgeyAiaWQiOiAzLCAidHlwZSI6ICLkuInnrYnlpZYiLCAibmFtZSI6ICLlsI/nhorliqDmub/lmagiLCAibWF4Q291bnQiOiAxMCwgImFsbG93VGFncyI6IFtdLCAicHJlZGV0ZXJtaW5lZCI6IFtdIH0sDQogICAgeyAiaWQiOiA0LCAidHlwZSI6ICLlj4LkuI7lpZYiLCAibmFtZSI6ICLmlrDlubTlpKfnpLzljIUiLCAibWF4Q291bnQiOiAzMCwgImFsbG93VGFncyI6IFt7InRhZyI6IuaKgOacr+mDqCIsImNvdW50Ijo1fSx7InRhZyI6IuWuouacjemDqCIsImNvdW50IjoyfV0sICJwcmVkZXRlcm1pbmVkIjogW10gfQ0KXQ0K`,``+import.meta.url).href;fetch(e).then(e=>e.json()).then(e=>{V.value=e});let t=new URL(`/lottery/assets/personData-BmOXsKjT.json`,``+import.meta.url).href;fetch(t).then(e=>e.json()).then(e=>{H.value=e})});let Q=p(()=>(J.value[U.value]||[]).map(e=>H.value.find(t=>t.id===e)||null).filter(e=>e!==null));function oe(e){W.value=1,U.value=e}let $=g(!1),se=p(()=>{let e=[],t=q.value,n=t.length;if(n===0){for(let t=0;t<f.length;t++){let n=[];for(let e=0;e<f[t].length;e++)n.push(null);e.push(n)}return e}let r=0;for(let i=0;i<f.length;i++){let a=[];for(let e=0;e<f[i].length;e++)a.push(t[r%n]),r++;e.push(a)}return e});function ce(){W.value>G.value&&(W.value=G.value),W.value<1&&(W.value=1)}function le(){X(),$.value=!1}function ue(){ie(),$.value=!0}function de(){history.back()}return(c,l)=>(h(),d(a,null,[s(te,{"spin-duration":2,"hide-default-cursor":!0}),m(`div`,{class:n([`lottery-container h-screen bg-cover bg-center bg-no-repeat flex text-white relative`,i(K)?``:`wait`])},[m(`div`,ne,[l[3]||=m(`div`,{class:`text-2xl font-bold mb-5 text-transparent bg-clip-text bg-(image:--title-color)`},`奖项`,-1),(h(!0),d(a,null,_(V.value,e=>(h(),d(`div`,{key:e.id,class:n([`cursor-target p-5 mb-5 bg-(--item-bg-color) border-2 border-(--item-border-color) cursor-pointer transition-all duration-0.3 ease-in-out text-center rounded-lg`,i(U)===e.id?`border-solid translate-x-4`:`border-dashed`]),onClick:t=>oe(e.id)},[m(`div`,{class:n([`text-lg font-bold text-(--item-text-color) mb-1 pb-1 border-(--item-border-color) border-b text-left`,{"text-white":e.id===i(U)}])},t(e.name),3),m(`div`,x,[m(`div`,null,t(e.type),1),m(`div`,S,t((i(J)[e.id]||[]).length)+` / `+t(e.maxCount)+`人`,1)])],10,b))),128))]),m(`div`,C,[m(`div`,w,[r(m(`input`,{"onUpdate:modelValue":l[0]||=t=>e(W)?W.value=t:null,type:`number`,min:`1`,max:i(G),class:`cursor-target px-3 py-0 text-lg border border-[#e0e0e0] rounded-sm w-50`,onInput:ce},null,40,T),[[ee,i(W),void 0,{number:!0}]]),r(m(`button`,{onClick:le,disabled:i(K),class:`cursor-target px-4 py-2.5 text-white text-sm border-none rounded-sm cursor-pointer transition-all duration-0.3 ease-in-out bg-[#4caf50] disabled:bg-[#ccc] disabled:cursor-not-allowed`},`开始`,8,re),[[u,!i(K)]]),r(m(`button`,{onClick:ue,disabled:!i(K),class:`cursor-target px-4 py-2.5 text-white text-sm border-none rounded-sm cursor-pointer transition-all duration-0.3 ease-in-out bg-[#f44336] disabled:bg-[#ccc] disabled:cursor-not-allowed`},`停止`,8,E),[[u,i(K)]]),r(m(`button`,{onClick:de,class:`cursor-target px-4 py-2.5 text-(--btn-text-color) bg-(--btn-bg-color) border-(--btn-border-color) border-2 rounded-sm cursor-pointer`},`锁屏`,512),[[u,!i(K)]])]),m(`div`,D,[r(m(`div`,O,[$.value&&i(Y).length>0?(h(),d(`div`,k,[s(y,{"rays-origin":`top-center`,"rays-color":`rgb(158, 223, 245)`,"rays-speed":1.5,"light-spread":2,"ray-length":.8,"follow-mouse":!0,"mouse-influence":.5,"noise-amount":.1,distortion:.05})])):o(``,!0),m(`div`,A,[m(`p`,j,`恭喜获得--`+t(V.value.find(e=>e.id===i(U))?.name||``),1),m(`button`,{class:`border-none text-white text-2xl cursor-pointer px-2.5`,onClick:l[1]||=e=>$.value=!1},`×`)]),m(`div`,M,[(h(!0),d(a,null,_(i(Y),e=>(h(),d(`div`,{key:e,class:`cursor-target flex flex-col items-center p-5 bg-(--item-bg-color) rounded-xl border border-(--item-border-color)`},[m(`img`,{src:H.value.find(t=>t.id===e)?.avatar,class:`w-25 aspect-square rounded-full mb-1 border-2 border-(--item-border-color)`},null,8,N),m(`div`,P,t(H.value.find(t=>t.id===e)?.name),1)]))),128))])],512),[[u,$.value&&i(Y).length>0]]),m(`div`,{class:n([`flex flex-col gap-2.5 justify-center h-full p-5 transition-all duration-1000 ease-in-out`,i(K)?`backdrop-blur-sm translate-y-[0%] scale-[1]`:`translate-y-[35%] scale-[0.65]`])},[(h(!0),d(a,null,_(se.value,(e,t)=>(h(),d(`div`,{key:t,class:`grid grid-cols-15 gap-8`},[(h(!0),d(a,null,_(e,(e,r)=>(h(),d(`div`,{key:r,class:n([`cursor-target bg-(--item-bg-color) px-2.5 py-1 rounded-lg text-center transition-all duration-30 ease-in-out flex flex-col justify-center items-center w-17.5 aspect-square overflow-hidden`,{"opacity-15":f[t][r]===0,"border border-(--item-border-color)":f[t][r]===1,"bg-linear-to-b from-[#9edff5] to-(--item-border-color) text-white opacity-100":i(K)&&e&&i(Y).some(t=>t===e.id),"float-animation":i(K)&&e&&!i(Y).some(t=>t===e.id)}])},[e?(h(),d(`img`,{key:0,src:e.avatar,alt:e.name,class:`w-10 aspect-square rounded-full mb-1 border-2 border-(--item-border-color)`},null,8,F)):o(``,!0)],2))),128))]))),128))],2)])]),m(`div`,I,[m(`div`,L,t(V.value.find(e=>e.id===i(U))?.name||``)+`中奖名单`,1),r(m(`button`,{onClick:l[2]||=(...e)=>i(Z)&&i(Z)(...e),class:`cursor-target mb-4 bg-(--btn-bg-hover-color) text-white rounded-sm py-2.5 cursor-pointer text-sm`},`重置中奖名单`,512),[[u,Q.value.length>0]]),m(`div`,R,[(h(!0),d(a,null,_(Q.value,e=>(h(),d(`div`,{key:e.id,class:`cursor-target flex items-center p-3 rounded-xl border border-(--item-border-color) backdrop-blur-sm`},[m(`img`,{src:e.avatar,alt:e.name,class:`w-12.5 aspect-square rounded-full mr-3 border-2 border-(--item-border-color)`},null,8,z),m(`div`,B,t(e.name),1)]))),128))])])],2)],64))}}),[[`__scopeId`,`data-v-00f94926`]]);export{V as default};